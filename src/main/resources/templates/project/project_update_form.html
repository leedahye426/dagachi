<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/header :: header"/>
<link href="/css/project.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<body>
<!-- Responsive navbar-->

<head th:replace="fragments/nav :: nav" />

<!-- Content section-->
<!-- Modal -->
<div class="modal" tabindex="-1" id="exampleModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">이메일 찾기</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <input type="text" placeholder="example@example.com" id="email_input">
                    <button type="button" class="btn border btn-sm" onclick="emailCheck();">검색</button>
                    <hr>
                    <div id="checkedEmail">
                        <input type="hidden" id="hiddenInput" name="hiddenInput"/>
                    </div>
                </form>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>

            </div>
        </div>
    </div>
</div>

<div class=" container row align-items-center  mx-auto mt-5">
    <form th:action="@{|/project/personal/${project.project_id}/update|}" method="post" enctype="multipart/form-data">

        <table class="border" style="padding-top:50px" align=center width=800 cellpadding=4>
            <tr>
                <th height=20 class="text-center" bgcolor=#ccc> 프로젝트 등록</th>
            </tr>
            <tr>
                <td bgcolor=white>
                    <table class="table2">
                        <tr>
                            <th>팀명</th>
                            <td>
                                <input type="text" name="team_name" size=20 required th:value="${project.team_name}">
                            </td>
                        </tr>
                        <tr>
                            <th style="vertical-align:top;">팀원</th>
                            <td id="box">
                                <button type="button" id="openModalBtn" class="btn border btn-sm" data-bs-toggle="modal"
                                        data-bs-target="#exampleModal">email 검색
                                </button>
                                <br>
                                <p th:each="member : ${members}">
                                    <input type='text' id='member_email' name='member_email' size='20'
                                           style='border:none' th:value="${member.email}" readonly>
                                    <button type='button' class='btn btn-sm border' onclick='removeEmail(this);'>취소
                                    </button>
                                </p>
                            </td>
                        </tr>
                        <tr>
                            <th>분류</th>
                            <td>
                                <div class="checkbox" id="updateCheckbox">
                                    <input class="form-check-input" type="checkbox" name="tag" id="itTag" value="IT">
                                    <label class="form-check-label" for="itTag">IT</label>


                                    <input class="form-check-input" type="checkbox" name="tag" id="artTag" value="예술">
                                    <label class="form-check-label" for="artTag">예술</label>


                                    <input class="form-check-input" type="checkbox" name="tag" id="civilTag" value="토목">
                                    <label class="form-check-label" for="civilTag">토목</label>


                                    <input class="form-check-input" type="checkbox" name="tag" id="elecTag" value="전기">
                                    <label class="form-check-label" for="elecTag">전기</label>
                                </div>
                            </td>

                        </tr>
                        <tr>
                            <th><br>프로젝트명</th>
                            <td><input type="text" name="project_title" size=60 required
                                       th:value="${project.project_title}"></td>
                        </tr>

                        <tr>
                            <th><br>프로젝트 설명</th>
                            <td><textarea name="project_content" cols=60 rows=10
                                          th:text="${project.project_content}"></textarea></td>
                        </tr>

                        <tr>
                            <th>포트폴리오</th>
                            <td id="fileBox">
                                <input type="file" name="file" size=10 maxlength=10 required><br>
                                <p>
                                    <span th:text="${project.org_name}"></span>
                                    <button type='button' class='btn btn-sm border' onclick='removeFile(this);'>-
                                    </button>
                                </p>
                            </td>
                        </tr>
                    </table>

                    <center>
                        <input type="submit" value="수정">
                    </center>
                </td>
            </tr>
        </table>
    </form>
</div>


<!-- Footer-->
<div th:replace="fragments/footer :: footer"/>
<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="/js/project.js"></script>
<script src="/js/scripts.js"></script>
<script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>

<!--    <script th:inline="javascript">-->
<!--    <%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>-->
<!--    <%@taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>-->
<!--        $(document).ready(function() {-->
<!--            console.log('ready');-->
<!--            var projectTags = [];-->
<!--            <c:forEach items="${projectTags}" var="projectTag">-->
<!--                console.log("${projectTag}");-->
<!--                projectTags.push("${projectTag}");-->
<!--            </c:forEach>-->

<!--           for(var i = 0; i < projectTags.length; i++) {-->
<!--                if(projectTags[i] === 'IT') $("input[id='itTag']").prop("checked", true);-->
<!--                else if(projectTags[i] === '토목') $("input[id='civilTag']").prop("checked", true);-->
<!--                else if(projectTags[i] === '예술') $("input[id='artTag']").prop("checked", true);-->
<!--                else if(projectTags[i] === '전기') $("input[id='elecTag']").prop("checked", true);-->

<!--            }-->
<!--        });-->
<!--     </script>-->
</body>
</html>
